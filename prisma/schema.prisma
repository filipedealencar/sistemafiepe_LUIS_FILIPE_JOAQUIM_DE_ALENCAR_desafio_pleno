generator client {
  provider = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Formulario {
  id             String    @id @default(cuid())
  nome           String
  descricao      String?
  schemaVersion  Int       @default(1)
  isAtivo        Boolean   @default(true)
  protegido      Boolean   @default(false) // <-- Adicionar
  dataCriacao    DateTime  @default(now())
  dataRemocao    DateTime?
  usuarioRemocao String?
  campos         Campo[]
  respostas      Resposta[] // <-- Novo relacionamento
}

model Campo {
  id           String   @id @default(cuid())
  campoId      String
  label        String
  tipo         String
  obrigatorio  Boolean
  propriedades Json?
  condicional  String?  // <-- Adicionar
  formularioId String
  formulario   Formulario @relation(fields: [formularioId], references: [id])
}

model Resposta {
  id            String   @id @default(cuid())
  formularioId  String
  schemaVersion Int
  respostas     Json
  criadoEm      DateTime @default(now())
  isAtivo       Boolean  @default(true)
  dataRemocao   DateTime?
  usuarioRemocao String?
  formulario    Formulario @relation(fields: [formularioId], references: [id])
}

